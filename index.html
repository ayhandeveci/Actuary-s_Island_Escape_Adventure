<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Büyükada Etkinliği — Renk Çarkı & Tarihçe</title>
  <meta http-equiv="Cache-Control" content="no-store" />
  <style>
    :root{--bg:#0f1115;--card:#151923;--muted:#9aa4b2;--text:#e7ecf3;--accent:#5F81FF;--ring:#2a3142}
    *{box-sizing:border-box}
    body{margin:0;background:#0f1115;color:var(--text);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial}
    header{position:sticky;top:0;background:#151923;border-bottom:1px solid #1f2533}
    .nav{max-width:1000px;margin:auto;padding:10px 16px;display:flex;gap:10px;align-items:center}
    .brand{font-weight:700}
    .spacer{flex:1}
    .tab{border:0;background:#222a3a;color:#fff;border-radius:10px;padding:8px 12px;cursor:pointer}
    .tab[aria-selected="true"]{background:#5F81FF;color:#0b1020;font-weight:800}
    main{max-width:1000px;margin:18px auto 60px;padding:0 16px}
    .card{background:#151923;border:1px solid #22293a;border-radius:12px;padding:16px;margin-bottom:18px}
    .muted{color:var(--muted)}
    .pill{display:inline-block;padding:4px 8px;border-radius:6px;background:#1a2030;border:1px solid #2a3347}
    /* wheel */
    .wrap{display:grid;place-items:center}
    .wheel{width:min(520px,85vw);aspect-ratio:1/1;border-radius:50%;position:relative;filter:drop-shadow(0 10px 24px rgba(0,0,0,.35))}
    .wheel svg{width:100%;height:100%;display:block;border-radius:50%;background:#0e1320;box-shadow:inset 0 0 0 6px var(--ring),inset 0 0 0 1px #3a4663}
    .pin{position:absolute;top:-12px;left:50%;transform:translateX(-50%);width:0;height:0;border-left:12px solid transparent;border-right:12px solid transparent;border-bottom:20px solid var(--accent)}
    .center{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:22%;aspect-ratio:1/1;border-radius:50%;background:#0b1020;border:4px solid #29324a;display:grid;place-items:center;color:#a7b1c2;font-size:12px}
    .btn{border:0;border-radius:10px;background:linear-gradient(180deg,#6ea8ff,#5F81FF);color:#0b1020;font-weight:800;padding:10px 16px;cursor:pointer}
    .result{margin-top:12px;padding:12px;border-radius:10px;background:#101624;border:1px solid #26304a}
    ul{margin:8px 0 0 20px}
  </style>
</head>
<body>
  <header>
    <div class="nav">
      <div class="brand">Büyükada Etkinliği</div>
      <div class="spacer"></div>
      <button id="tWheel" class="tab" aria-selected="true">🎯 Renk Çarkı</button>
      <button id="tInfo"  class="tab" aria-selected="false">🏝️ Büyükada Tarihi</button>
    </div>
  </header>

  <main>
    <!-- Renk Çarkı -->
    <section id="sWheel" class="card">
      <h2>Fotoğraf Yarışması — Renk Çarkı</h2>
      <p class="muted">Çarkı çevir, çıkan renkten <strong>en az 4 fotoğraf</strong> çek. Dönüşte ekip oylamasıyla “Günün Serisi”ni seçiyoruz.</p>

      <div class="wrap" style="margin-top:8px">
        <div class="wheel">
          <div class="pin" aria-hidden="true"></div>
          <svg id="wheel" viewBox="0 0 100 100" role="img" aria-label="Renk çarkı"></svg>
          <div class="center">Çevir</div>
        </div>
        <div style="margin-top:10px;display:flex;gap:10px;flex-wrap:wrap;justify-content:center">
          <button class="btn" id="spin">ÇARKI ÇEVİR</button>
          <button class="tab" id="reset">Sıfırla</button>
        </div>
      </div>

      <div class="result" id="out" hidden>
        <div id="outText"></div>
      </div>

      <div class="result">
        <strong>🧭 Neden bu palet?</strong>
        <ul>
          <li><span class="pill" style="background:#2FA3BF">Deniz</span> — İskele ve kıyı şeridinin turkuaz–mavi tonları.</li>
          <li><span class="pill" style="background:#2E6B5E">Çam</span> — Adanın omurgasını oluşturan çam ormanları.</li>
          <li><span class="pill" style="background:#B55239">Kiremit</span> — Köşk çatıları ve ahşap yapılardaki sıcak toprak tonları.</li>
          <li><span class="pill" style="background:#F2E7C9;color:#0b1020;border-color:#e2d8b5">Kum</span> — Sahil ve taş yolların pastel bej tonları.</li>
        </ul>
      </div>
    </section>

    <!-- Büyükada Tarihi -->
    <section id="sInfo" class="card" hidden>
      <h2>Büyükada Tarihinden İlginç Bilgiler</h2>
      <ul>
        <li><strong>Bizans:</strong> 9. yüzyıldan itibaren bir <em>sürgün</em> adası; İmparatoriçe İrene dâhil kimi hanedan üyeleri burada tutuldu.</li>
        <li><strong>Osmanlı:</strong> 19. yy’da Rum, Ermeni ve Yahudi cemaatlerinin sayfiye merkezi; görkemli ahşap <em>köşk</em> mimarisi bu dönemde gelişti.</li>
        <li><strong>Manastırlar:</strong> Aya Yorgi Tepesi’ndeki manastır hem dini ziyaret hem manzara noktası olarak simgesel önemde.</li>
        <li><strong>Troçki:</strong> 1929–1933 arasında sürgün yaşamını Büyükada’da sürdürdü; bazı eserlerini burada yazdı.</li>
        <li><strong>Ulaşım kültürü:</strong> Uzun yıllar adanın sembolü <em>faytonlardı</em>; günümüzde yerini elektrikli araçlar ve bisiklet aldı.</li>
        <li><strong>Kültürel doku:</strong> Panjurlu ahşap köşkler, Osmanlı ile Avrupa etkilerinin harmanını yansıtır.</li>
      </ul>
    </section>
  </main>

  <script>
    // --- ÇARK AYARLARI ---
    const COLORS = ['#2FA3BF','#2E6B5E','#B55239','#F2E7C9'];
    const LABELS = ['Deniz','Çam','Kiremit','Kum'];
    const svg = document.getElementById('wheel');
    let spinAngle = 0, chosen = null;

    function contrast(hex){
      const c = hex.replace('#','');
      const r=parseInt(c.slice(0,2),16), g=parseInt(c.slice(2,4),16), b=parseInt(c.slice(4,6),16);
      const yiq=(r*299+g*587+b*114)/1000;
      return yiq >= 140 ? '#0b1020' : '#f2f4f8';
    }

    function draw(){
      svg.innerHTML='';
      const r=48, cx=50, cy=50, n=COLORS.length;
      for(let i=0;i<n;i++){
        const a0=(i/n)*2*Math.PI - Math.PI/2, a1=((i+1)/n)*2*Math.PI - Math.PI/2;
        const x1=cx+r*Math.cos(a0), y1=cy+r*Math.sin(a0);
        const x2=cx+r*Math.cos(a1), y2=cy+r*Math.sin(a1);
        const p=document.createElementNS('http://www.w3.org/2000/svg','path');
        p.setAttribute('d',`M ${cx} ${cy} L ${x1} ${y1} A ${r} ${r} 0 0 1 ${x2} ${y2} Z`);
        p.setAttribute('fill',COLORS[i]); p.setAttribute('stroke','#0b1020'); p.setAttribute('stroke-width','0.6');
        svg.appendChild(p);
        // Etiket
        const mid=(a0+a1)/2, lx=cx+(r*0.58)*Math.cos(mid), ly=cy+(r*0.58)*Math.sin(mid);
        const t=document.createElementNS('http://www.w3.org/2000/svg','text');
        t.setAttribute('x',lx); t.setAttribute('y',ly); t.setAttribute('text-anchor','middle'); t.setAttribute('dominant-baseline','middle');
        t.setAttribute('font-size','5'); t.setAttribute('font-weight','700'); t.setAttribute('fill',contrast(COLORS[i]));
        t.textContent = LABELS[i]; svg.appendChild(t);
      }
      svg.style.transition='transform .0s'; svg.style.transform=`rotate(${spinAngle}deg)`;
      setTimeout(()=>{ svg.style.transition='transform 2.2s cubic-bezier(.14,.81,.2,1)'; },20);
    }

    function spin(){
      const n=COLORS.length;
      const target=Math.floor(Math.random()*n);
      chosen = target;
      const slice=360/n;
      const targetAngle = 360 - (target + 0.5) * slice;
      const final = 4*360 + targetAngle + (Math.random()*4-2);
      spinAngle = final % 360;

      svg.style.transition='transform 3.1s cubic-bezier(.07,.8,.11,1)';
      svg.style.transform=`rotate(${final}deg)`;
      document.getElementById('spin').disabled = true;
      setTimeout(()=>{
        document.getElementById('spin').disabled = false;
        const color = COLORS[chosen], label = LABELS[chosen];
        const out = document.getElementById('out'); out.hidden=false;
        document.getElementById('outText').innerHTML =
          `Bugünün rengi: <span class="pill" style="background:${color};color:${contrast(color)}">${label}</span> — Bu renge odaklanarak en az <strong>4 fotoğraf</strong> çek.`;
      },3200);
    }

    function resetAll(){
      chosen=null; spinAngle=0; draw(); document.getElementById('out').hidden=true;
    }

    // İlk çizim
    document.addEventListener('DOMContentLoaded', ()=>{ draw(); });

    // Butonlar
    document.getElementById('spin').addEventListener('click', spin);
    document.getElementById('reset').addEventListener('click', resetAll);

    // Sekmeler
    const tWheel=document.getElementById('tWheel'), tInfo=document.getElementById('tInfo');
    const sWheel=document.getElementById('sWheel'), sInfo=document.getElementById('sInfo');
    tWheel.addEventListener('click',()=>{sWheel.hidden=false; sInfo.hidden=true; tWheel.setAttribute('aria-selected','true'); tInfo.setAttribute('aria-selected','false');});
    tInfo .addEventListener('click',()=>{sWheel.hidden=true;  sInfo.hidden=false; tWheel.setAttribute('aria-selected','false'); tInfo.setAttribute('aria-selected','true');});
  </script>
</body>
</html>